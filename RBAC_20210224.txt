RBAC模型

一.RBAC基于角色的访问控制(Role-Based Access Control)
  Access[ˈækses]v. 接近，使用；访问，存取（电脑文档）
  RBAC支持三个著名的安全原则:
    最小权限原则,责任分离原则和数据抽象原则
  
二.RBAC分类 
  RBAC 分为RBAC0、RBAC1、RBAC2、RBAC3 。 
    RBAC0：是RBAC的核心思想。完全支持RBAC概念的任何系统的最低需求。 
    RBAC1：是把RBAC的角色分层模型。增加了角色分级的概念，一个角色可以从另一个角色继承许可权。 
    RBAC2：增加了RBAC的约束模型。增加了一些限制，强调在RBAC的不同组件中在配置方面的一些限制。 
    RBAC3：其实是RBAC2 + RBAC1。称为统一模型，它包含了RBAC1和RBAC2，利用传递性，也把RBAC0包括 在内。这些模型构成了RBAC96模型族。

  1.RBAC0 原始实现方式,是RBAC模型的基础
    用户<---用户角色分配--->角色<---角色权限分配--->权限(操作<--->控制对象)
    用户与角色之间可以是多对多关系(session),同时每个角色至少有一个权限

  2.RBAC1 
    基于RBAC0 模型,引入了角色间的继承关系,即角色有了上下级关系
    角色间的继承关系可分为一般继承关系和受限继承关系。
    一般继承关系仅要求角色继承关系是一个绝对偏序关系， 允许角色间的多继承。
    而受限继承关系则进一步要求角色继承关系是一个树结构，实现角色间的单继承。
    这种模型适合于角色之间层次分明，可以给"角色分组分层!!!"。

  3.RBAC2 基于RBAC0模型的基础上,进行了角色的访问控制
    RBAC2中的一个基本限制是互斥角色的限制，互斥角色是指各自权限可以互相制约的两个角色。
    对于这类角色一个 用户在某一次活动中只能被分配其中的一个角色，不能同时获得两个角色的使用权。
    3.1 互斥角色:同一用户只能分配到一组互斥酵色集合中至多一个角色,支持责任分离原则
      互斥角色是指各 自权限互相制约的两个角色。对于这类角色一个用户在某一次活动中只能被分配其中的一个角色，不能同时 获得两个角色的使用权。
      常举的例子：在审计活动中，一个角色不能同时被指派给会计角色和审计员角色。 
    3.2 基数约束: 一个角色被分配的用户数量受限；
      一个用户可拥有的角色数目受限；
      同样一个角色对应的访问权 限数目也应受限，以控制高级权限在系统中的分配。
      例如公司的领导人有限的； 
    3.3 先决条件角色: 
      可以分配角色给用户仅当该用户已经是另一角色的成员；对应的可以分配访问权限给角色， 仅当该角色已经拥有另一种访问权限。指要想获得较高的权限，要首先拥有低一级的权限。就像我们生活 中，国家主席是从副主席中选举的一样
    3.4 运行时互斥:
      例如，允许一个用户具有两个角色的成员资格，但在运行中不可同时激活这两个角色。
      用户<--- 与用户相联系的会话集合--->SESSION<---激活的角色--->Role
                                          ↑---DSD 动态职责分离---↑
  4.RBAC3
    RBAC3：就是RBAC1+RBAC2。也就是最全面级的权限管理，
    它是基于RBAC0的基础上，将RBAC1和RBAC2进行整合

三.实用的RBAC模型的数据库建模
  1.扩展RBAC用户角色权限设计方案
    “用户-角色-权限”的授权模型:用户与角色之间，角色与权限之间，一般者是多对多的关系。

  2.扩展RBAC用户角色权限设计方案-用户组
    当用户的数量非常大时，要给系统每个用户逐一授权（授角色），是件非常烦琐的事情。这时，就需要给用户分 组，每个用户组内有多个用户。除了可给用户授权外，还可以给用户组授权。这样一来，用户拥有的所有权限，就 是用户个人拥有的权限与该用户所在用户组拥有的权限之和。

    用户组表
    USER_GROUP_ID
    USER_GROUP_NAME
    PARENT_USER_NAME

    用户组与用户关联表
    USER_GROUP_ID
    USER_ID

    用户表
    USER_ID
    USER_NAME

    用户组角色关联表
    USER_GROUP_ID
    Role_ID
    角色表
    ROLE_ID 
    ROLE_NAME


    用户角色关联表 
    USER_ID
    ROLE_ID
    
  3.扩展RBAC用户角色权限设计方案-业务功能!!!
    
    在应用系统中，权限表现成什么？
    对功能模块的操作，
    对上传文件的删改，
    菜单的访问，
    页面上某个按钮,
    某个图片的可见性控制，都可属于权限的范畴。
    有些权限设计，会把功能操作作为一类，而把文件、菜单、页面元素 等作为另一类，这样构成“用户-角色-权限-资源”的授权模型。
    而在做数据表建模时，可把功能操作和资源统一管理，也就是都直接与权限表进行关联，这样可能更具便捷性和易扩展性。

    菜单表
    MENU_ID
    MENU_NAME
    MENU_URL
    PARENT_MENU_ID

    菜单权限关联表 
    Permission_ID
    MENU_ID

    页面元素
    PAGE_ELE_ID
    PAGE_ELE_CODE

    权限页面元素关联表
    Permission_ID
    PAGE_ELE_ID

    文件表
    FILE_ID
    FILE_NAME
    FILE_PATH

    权限文件关联表
    Permission_ID
    FILE_ID

    权限表 
    Permission_ID
    Permission_Type

    Function_Operation_Table
    Operation_ID
    Operation_NAME
    Operation_Code
    拦截URL前缀
    Parent_Operation_ID

    Permission_Operation_Table
    Permission_ID
    Operation_ID

    请留意权限表中有一列“权限类型”，我们根据它的取值来区分是哪一类权限，
      如“MENU”表示菜单的访问权限、“OPERATION”表示功能模块的操作权限、“FILE”表示文件的修改权限、“ELEMENT”表示页面元素的可见性控制 等。   
    这样设计的好处有二:
      其一，不需要区分哪些是权限操作，哪些是资源，（实际上，有时候也不好区分， 如菜单，把它理解为资源呢还是功能模块权限呢？）。
      其二，方便扩展，当系统要对新的东西进行权限控制时，我只需要建立一个新的关联表“权限XX关联表”，并确定这类权限的权限类型字符串。 
      这里要注意的是，权限表与权限 菜单关联表、权限菜单关联表与菜单表都是一对一的关系。（文件、页面权限点、功能操作等同理）。
      也就是每添加一个菜单，就得同时往这三个表中各插入一条记录。这样，可以不需要权限菜单关联表，让权限表与菜单表直接关联，
      此时，须在权限表中新增一列用来保存菜单的ID，权限表通过“权限类型”和这个ID来区分是种类型下的哪条记录

    RBAC权限模型的扩展模型的完整设计图
      用户组+业务功能
      新增角色权限关系表
      Role_ID
      Permission_ID

    





































































































































